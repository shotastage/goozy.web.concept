{% extends "base.html" %}
{% load widget_tweaks %}

{% block body %}

<div class="row">
    <h1>新規登録</h1>
</div>

<div class="row">
    <img id="preview" class="rounded mx-auto d-block" height="300" alt="選択された画像">

</div>


<form method="post" novalidate>{% csrf_token %}

    
    <div class="form-group">
        <div class="input-group">
            <label class="input-group-btn">
                <span class="btn btn-primary">
                    Choose File<input type="file" id="file" style="display:none">
                </span>
            </label>
            <input type="text" class="form-control" readonly="">
        </div>
    </div>
    <div class="form-group">
        <label>品名</label>
        {{form.name|add_class:"form-control"}}
    </div>
    <div class="form-group">
        <label>シリアル</label>
        {{form.serial|add_class:"form-control"}}
    </div>

    <button type="submit" class="btn btn-primary">登録</button>
</form>


{% endblock %}

{% block script %}

<script>
$('#file').on('change', function (e) {
    var reader = new FileReader();
    reader.onload = function (e) {
        $("#preview").attr('src', e.target.result);
    }
    reader.readAsDataURL(e.target.files[0]);
});
$(document).on('change', ':file', function() {
    var input = $(this),
    numFiles = input.get(0).files ? input.get(0).files.length : 1,
    label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
    input.parent().parent().next(':text').val(label);
});
</script>

{% endblock %}
